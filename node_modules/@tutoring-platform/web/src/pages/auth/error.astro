---
import Layout from '../../layouts/Layout.astro';

// URL에서 에러 메시지를 가져옵니다
const { error } = Astro.url.searchParams;

// 에러 메시지 번역
const errorMessages: Record<string, string> = {
  'No code provided': '인증 코드가 없습니다',
  'No user in session': '세션에 사용자 정보가 없습니다',
  'Profile creation failed': '사용자 프로필 생성 중 오류가 발생했습니다',
  'Authentication failed': '인증 처리 중 오류가 발생했습니다'
};

// 에러 메시지 번역 또는 원본 메시지 사용
const translatedError = error ? (errorMessages[error] || error) : '알 수 없는 오류가 발생했습니다';
---

<Layout title="인증 오류">
  <main>
    <h1>인증 오류가 발생했습니다</h1>
    <p>죄송합니다. 인증 처리 중 문제가 발생했습니다.</p>
    
    {error && (
      <div class="error-details">
        <h2>오류 정보</h2>
        <p>{translatedError}</p>
      </div>
    )}
    
    <div class="actions">
      <a href="/" class="button">홈으로 돌아가기</a>
      <a href="/auth/login" class="button">다시 로그인하기</a>
    </div>
  </main>
</Layout>

<style>
  main {
    padding: 2rem;
    max-width: 800px;
    margin: 0 auto;
    text-align: center;
  }
  
  .error-details {
    margin: 2rem 0;
    padding: 1rem;
    background: #fff3f3;
    border: 1px solid #ffcdd2;
    border-radius: 8px;
    text-align: left;
  }
  
  .actions {
    display: flex;
    gap: 1rem;
    justify-content: center;
    margin-top: 2rem;
  }
  
  .button {
    display: inline-block;
    padding: 0.75rem 1.5rem;
    background: #4a90e2;
    color: white;
    text-decoration: none;
    border-radius: 4px;
    transition: background 0.2s;
  }
  
  .button:hover {
    background: #357abd;
  }
</style> 